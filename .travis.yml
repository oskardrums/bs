language: rust

# TODO - also test *-musl targets

rust:
    - stable
    - beta
    - nightly

cache:
  directories:
    - /home/travis/.cargo

before_cache:
  - rm -rf /home/travis/.cargo/registry

arch:
    - amd64
    - arm64

script:
  - echo $TRAVIS_RUST_VERSION
  - if [ "$TRAVIS_RUST_VERSION" == "nightly" ];  then cargo build --workspace --verbose --all-features; cargo test --workspace --verbose --all-features ; else cargo build --verbose; cargo test --verbose; fi
